# Feature Configuration
feature_engineering:
  naming_template: "feat_{category}_{description}"
  
# Feature types and categories
feature_types:
  - raw_features
  - engineered_features
  - interaction_features
  - sequence_features
  - embedding_features
  - temporal_features
  - categorical_features
  - numerical_features

# Feature groups
feature_groups:
  raw_numerical:
    - home_league_position
    - away_league_position
    - Home_points_cum
    - Away_points_cum
    - Home_team_matches
    - Away_team_matches
    - Home_goal_difference_cum
    - Away_goal_difference_cum
    - Home_draws
    - Away_draws
    - Home_wins
    - Away_wins
    - home_team_elo
    - away_team_elo
  
  engineered_numerical:
    - home_draw_rate
    - away_draw_rate
    - home_average_points
    - away_average_points
    - home_win_rate
    - away_win_rate
    - home_attack_strength
    - away_attack_strength
    - home_defense_weakness
    - away_defense_weakness
    - home_poisson_xG
    - away_poisson_xG
    - home_h2h_dominance
    - away_h2h_dominance
  
  sequence_numerical:
    - Home_saves_mean
    - Away_saves_mean
    - Home_fouls_mean
    - Away_fouls_mean
    - Home_possession_mean
    - away_possession_mean
    - Home_shot_on_target_mean
    - away_shot_on_target_mean
    - Home_offsides_mean
    - Away_offsides_mean
    - Home_passes_mean
    - Away_passes_mean
    - home_corners_mean
    - away_corners_mean
    - home_interceptions_mean
    - away_interceptions_mean
    - home_xG_rolling_rollingaverage
    - away_xG_rolling_rollingaverage
    - home_shot_on_target_rollingaverage
    - away_shot_on_target_rollingaverage
    - home_goal_rollingaverage
    - away_goal_rollingaverage
    - home_saves_rollingaverage
    - away_saves_rollingaverage
    - home_goal_difference_rollingaverage
    - away_goal_difference_rollingaverage
    - home_shots_on_target_accuracy_rollingaverage
    - away_shots_on_target_accuracy_rollingaverage
    - home_corners_rollingaverage
    - away_corners_rollingaverage
  
  h2h_numerical:
    - h2h_matches
    - h2h_draws
    - home_h2h_wins
    - away_h2h_wins
    - h2h_avg_goals
    - home_avg_attendance
    - away_avg_attendance
  
  categorical:
    - season_encoded
    - league_encoded
    - date_encoded
    - home_encoded
    - away_encoded
    - venue_encoded
    - referee_encoded

# Preprocessing settings
preprocessing:
  scaling:
    method: "standard"
    target_range: [-1, 1]
    handle_missing: True
    handle_infinite: True
    handle_unknown: "ignore"
    float_dtype: "float32"
    int_dtype: "int32"
  encoding:
    method: "label"
    handle_unknown: "ignore"
    handle_missing: True
  imputation:
    numerical_strategy: "mean"
    categorical_strategy: "mode"
    max_missing_ratio: 0.3
    fill_value: 0
  feature_selection:
    method: "mutual_info"
    k_best: 100
    threshold: 0.01

# Validation settings
validation:
  correlation_threshold: 0.95
  missing_threshold: 0.1
  variance_threshold: 0.01
  cardinality_limit: 1000
  validation_split: 0.2
  test_split: 0.2
  check_missing: True
  check_infinite: True
  check_correlation: True
  check_cardinality: True
  check_variance: True

# Sequence features
sequence:
  length: 5  # for rolling averages
  window_sizes: [3, 5, 10]
  aggregation_methods: ["mean", "std", "max", "min"]

# Embedding features
embeddings:
  team_embedding_dim: 64
  player_embedding_dim: 32
  league_embedding_dim: 16
  
# Feature generation
interactions:
  max_degree: 2
  max_features: 100
  selection_method: "mutual_info"
  
# Feature selection
selection:
  method: "recursive"
  n_features: 100
  importance_threshold: 0.01

# Rolling metrics configuration
rolling_metrics:
  metrics:
    - xG
    - shot_on_target
    - goal
    - saves
    - goal_difference
    - shots_on_target_accuracy
    - corners
  window_sizes: [3, 5, 10]
  
# Head to head features
head_to_head:
  metrics:
    - matches
    - draws
    - wins
    - avg_goals
    - dominance
  lookback_period: 365  # days

# Advanced metrics
advanced_metrics:
  strength_calculation: "bayesian"
  elo_k_factor: 32
  form_window: 5
  poisson_prior: 1.0